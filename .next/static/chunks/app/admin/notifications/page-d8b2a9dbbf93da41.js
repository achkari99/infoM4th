(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},886:(e,t,r)=>{Promise.resolve().then(r.bind(r,9215))},1289:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(2373).UU)("https://mhurrctigejpeawlyatp.supabase.co","sb_publishable_toVptLBJfm_pkub8IB0NxQ_2vYMB-UH",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:d?24*Number(n)/Number(s):n,className:l("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:d,...c}=r;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return r.displayName=s(e),r}},3664:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(2821),s=r(5889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4790:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var a=r(2115),s=r(1289);function l(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(null),[i,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=!0;(async()=>{let{data:r,error:a}=await s.N.auth.getSession();if(e){if(a)t(null),l(null);else{var i,d,c;t(null!=(d=r.session)?d:null),l(null!=(c=null==(i=r.session)?void 0:i.user)?c:null)}n(!1)}})();let{data:r}=s.N.auth.onAuthStateChange((e,r)=>{var a;t(null!=r?r:null),l(null!=(a=null==r?void 0:r.user)?a:null)});return()=>{e=!1,r.subscription.unsubscribe()}},[]),{session:e,user:r,loading:i}}},5998:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},6948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var a=r(5155),s=r(2115),l=r(4269);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},9215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(5155),s=r(2115),l=r(63),i=r(6948),n=r(3664);let d=(0,r(1847).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var c=r(5998),o=r(1289),u=r(4790);function m(){let e=(0,l.useRouter)(),{user:t,loading:r}=(0,u.w)(),[m,x]=(0,s.useState)(!0),[f,p]=(0,s.useState)(!1),[h,N]=(0,s.useState)(null),[g,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{r||t||e.replace("/login")},[r,t,e]),(0,s.useEffect)(()=>{(async()=>{if(!t)return;x(!0),N(null);let{data:e,error:r}=await o.N.from("profiles").select("role").eq("id",t.id).maybeSingle();if(r){N(r.message),x(!1);return}if((null==e?void 0:e.role)!=="admin"){p(!1),x(!1);return}p(!0);let[{data:a},{data:s}]=await Promise.all([o.N.from("join_requests").select("id, name, email, created_at").order("created_at",{ascending:!1}).limit(6),o.N.from("profiles").select("id, full_name, email, created_at").order("created_at",{ascending:!1}).limit(6)]);y([...(null!=a?a:[]).map(e=>({id:e.id,title:"New join request",detail:"".concat(e.name," ? ").concat(e.email),timestamp:new Date(e.created_at).toLocaleString(),type:"join"})),...(null!=s?s:[]).map(e=>({id:e.id,title:"New member confirmed",detail:"".concat(e.full_name||"New profile"," ? ").concat(e.email),timestamp:new Date(e.created_at).toLocaleString(),type:"member"}))].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,10)),x(!1)})()},[t]);let j=(0,s.useMemo)(()=>({join:(0,a.jsx)(n.A,{size:18,className:"text-primary"}),member:(0,a.jsx)(d,{size:18,className:"text-primary"})}),[]);return r||m?(0,a.jsx)("div",{className:"p-8 max-w-7xl mx-auto text-muted-foreground uppercase tracking-[0.3em] text-xs",children:"Loading notifications"}):f?(0,a.jsxs)("div",{className:"p-8 max-w-5xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs uppercase tracking-[0.3em] text-muted-foreground",children:[(0,a.jsx)("span",{className:"h-1 w-10 bg-primary/70"}),"System Notices"]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Notifications"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"All admin-visible system signals in one feed."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.2em] text-muted-foreground",children:[(0,a.jsx)(c.A,{size:14,className:"text-primary"}),"Quiet mode"]})]}),h&&(0,a.jsx)("div",{className:"border border-border bg-card/60 text-muted-foreground text-sm px-4 py-3 rounded-2xl",children:h}),(0,a.jsx)("div",{className:"space-y-4",children:0===g.length?(0,a.jsx)(i.Zp,{className:"bg-card border-border",children:(0,a.jsx)(i.Wu,{className:"text-muted-foreground p-6",children:"No notifications yet."})}):g.map(e=>(0,a.jsx)(i.Zp,{className:"bg-card border-border",children:(0,a.jsxs)(i.Wu,{className:"p-6 flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full border border-border flex items-center justify-center",children:j[e.type]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,a.jsx)("h2",{className:"text-foreground font-semibold",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:e.detail})]})]})},e.id))})]}):(0,a.jsx)("div",{className:"p-8 max-w-3xl mx-auto",children:(0,a.jsxs)(i.Zp,{className:"bg-card border-border",children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-foreground",children:"Access restricted"})}),(0,a.jsx)(i.Wu,{className:"text-muted-foreground",children:"Admin access is required to view notifications."})]})})}}},e=>{e.O(0,[373,909,441,493,358],()=>e(e.s=886)),_N_E=e.O()}]);